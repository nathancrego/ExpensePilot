<div class="container">
    <h1 class="mt-3">Edit User</h1>
    <ng-container *ngIf="user; else notFound">
        <form #edituserForm="ngForm" (ngSubmit)="onFormSubmit(edituserForm)">
            <div class="mt-2 pb-3">
                <div class="mt-3">
                    <label class="form-label" for="id">UserID</label>
                    <input type="text" disabled id="id" class="form-control" name="id" value="{{user.id}}">
                </div>
                <div class="mt-3">
                    <label class="form-label">Logon</label>
                    <input type="text" id="logon" class="form-control" name="logon" placeholder="Enter Logon like JohnD"
                        [(ngModel)]="user.logon" required>
                    <div class="validation" *ngIf="edituserForm.submitted && !edituserForm.controls['logon']?.valid">
                        Logon is required.
                    </div>
                </div>
                <div class="mt-3">
                    <label class="form-label">First Name</label>
                    <input type="text" id="fName" class="form-control" name="fName"
                        placeholder="Enter First Name like John" [(ngModel)]="user.fName" required>
                    <div class="validation" *ngIf="edituserForm.submitted && !edituserForm.controls['fName']?.valid">
                        First Name is required.
                    </div>
                </div>
                <div class="mt-3">
                    <label class="form-label">Last Name</label>
                    <input type="text" id="lName" class="form-control" name="lName"
                        placeholder="Enter Last Name like Doe" [(ngModel)]="user.lName" required>
                    <div class="validation" *ngIf="edituserForm.submitted && !edituserForm.controls['lName']?.valid">
                        Last Name is required.
                    </div>
                </div>
                <div class="mt-3">
                    <label class="form-label">Email</label>
                    <input type="text" id="email" class="form-control" name="email"
                        placeholder="Enter Email like johndoe@gmail.com" [(ngModel)]="user.email" required>
                    <div class="validation" *ngIf="edituserForm.submitted && !edituserForm.controls['email']?.valid">
                        Email is required.
                    </div>
                </div>
                <div class="mt-3">
                    <label for="managerID">Manager</label>
                    <select id="managerID" class="form-control" [(ngModel)]="selectedManagerId" name="managerID"
                        required>
                        <option *ngFor="let manager of managers$ | async" [value]="manager.id">{{ manager.fName }} {{
                            manager.lName }}</option>
                    </select>
                    <div class="validation"
                        *ngIf="edituserForm.submitted && !edituserForm.controls['managerID']?.valid">
                        Manager is required.
                    </div>
                </div>

                <div class="mt-3">
                    <label for="departmentID">Department</label>
                    <select id="departmentID" class="form-control" [(ngModel)]="selectedDepartmentId"
                        name="departmentID" required>
                        <option *ngFor="let department of departments$ | async" [value]="department.dptID">{{
                            department.departmentName }}</option>
                    </select>
                    <div class="validation"
                        *ngIf="edituserForm.submitted && !edituserForm.controls['departmentID']?.valid">
                        Department is required.
                    </div>
                </div>

                <div class="mt-3">
                    <label class="form-label" for="lastUpdated">Last Updated</label>
                    <input type="date" disabled id="lastUpdated" class="form-control" name="lastUpdated"
                        value="{{user.lastUpdated}}" [ngModel]="user.lastUpdated | date:'yyyy-MM-dd'"
                        (ngModelChange)="user.lastUpdated = $event">
                </div>

                <div class="mt-3 d-flex">
                    <button type="submit" class="btn btn-outline-success"> <i class="bi bi-pencil-fill"></i>
                        Update</button>
                    <button type="button" class="btn btn-outline-danger ms-3" (click)="onDelete()"> <i
                            class="bi bi-trash-fill"></i> Delete</button>
                    <button type="button" class="btn btn-outline-secondary ms-3" (click)="onBack()"> <i
                            class="bi bi-arrow-left"></i> Back To List</button>
                </div>
            </div>
        </form>
    </ng-container>

    <!--template using temp variable for notFound-->
    <ng-template #notFound>
        <div class="alert alert-warning" role="alert">
            User not found!
        </div>
    </ng-template>
</div>