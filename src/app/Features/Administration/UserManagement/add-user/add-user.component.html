<div class="container">
    <h1 class="mt-3">Add New User</h1>
    <form (ngSubmit)="onFormSubmit(userForm)" #userForm="ngForm">
        <div class="mt-2">
            <div class="mt-3">
                <label class="form-label">Logon</label>
                <input type="text" id="logon" class="form-control" name="logon" placeholder="Enter Logon like JohnD"
                    [(ngModel)]="users.logon" required>
                <div class="validation" *ngIf="userForm.submitted && !userForm.controls['logon']?.valid">
                    Logon is required.
                </div>
            </div>
            <div class="mt-3">
                <label class="form-label">First Name</label>
                <input type="text" id="fName" class="form-control" name="fName" placeholder="Enter First Name like John"
                    [(ngModel)]="users.fName" required>
                <div class="validation" *ngIf="userForm.submitted && !userForm.controls['fName']?.valid">
                    First Name is required.
                </div>
            </div>
            <div class="mt-3">
                <label class="form-label">Last Name</label>
                <input type="text" id="lName" class="form-control" name="lName" placeholder="Enter Last Name like Doe"
                    [(ngModel)]="users.lName" required>
                <div class="validation" *ngIf="userForm.submitted && !userForm.controls['lName']?.valid">
                    Last Name is required.
                </div>
            </div>
            <div class="mt-3">
                <label class="form-label">Email</label>
                <input type="text" id="email" class="form-control" name="email"
                    placeholder="Enter Email like johndoe@gmail.com" [(ngModel)]="users.email" required>
                <div class="validation" *ngIf="userForm.submitted && !userForm.controls['email']?.valid">
                    Email is required.
                </div>
            </div>

            <div class="mt-3">
                <label for="managerID" class="form-label">Manager</label>
                <select id="managerID" class="form-control" [(ngModel)]="users.managerID" name="managerID" required>
                    <option *ngFor="let manager of managers$ | async" [value]="manager.id">
                        {{ manager.fName }} {{ manager.lName }}
                    </option>
                </select>
                <div class="validation" *ngIf="userForm.submitted && !userForm.controls['managerID']?.valid">
                    Manager is required.
                </div>
            </div>

            <div class="mt-3">
                <label for="departmentID">Department</label>
                <select id="departmentID" class="form-control" [(ngModel)]="users.departmentID" name="departmentID"
                    required>
                    <option *ngFor="let department of departments$ | async" [value]="department.dptID">
                        {{ department.departmentName }}
                    </option>
                </select>
                <div class="validation" *ngIf="userForm.submitted && !userForm.controls['departmentID']?.valid">
                    Department is required.
                </div>
            </div>

            <div class="mt-3">
                <label class="form-label" for="lastUpdated">Last Updated</label>
                <input type="date" disabled id="lastUpdated" class="form-control" name="lastUpdated"
                    value="{{users.lastUpdated}}" [ngModel]="users.lastUpdated | date:'yyyy-MM-dd'"
                    (ngModelChange)="users.lastUpdated = $event">
            </div>

            <div class="d- flex mt-3">
                <button type="submit" class="btn btn-primary"><i class="bi bi-floppy"></i> Save</button>
                <button type="button" class="btn btn-outline-secondary ms-3" (click)="onBack()"> <i
                        class="bi bi-arrow-left"></i> Back To List</button>
            </div>
        </div>
    </form>
</div>